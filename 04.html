<!DOCTYPE html>
<html lang="en">
    <head>

        <meta charset="utf-8">
        <title>cit261</title>

        <!-- Mobile Specific Metas -->
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <!-- FONT -->
        <link href="//fonts.googleapis.com/css?family=Raleway:400,300,600" rel="stylesheet" type="text/css">

        <!-- CSS -->
        <link rel="stylesheet" href="css.css">
    </head>
    <body>
        <header>
            <div>
                <nav>
                    <ul>
                        <li id="menuHome"><a href="index.html">:: home ::</a></li>
                        <li id="menu01"><a href="01.html">01</a></li>
                        <li id="menu02"><a href="02.html">02</a></li>
                        <li id="menu03"><a href="03.html">03</a></li>
                        <li id="menu04"><a href="04.html">04</a></li>
                        <li id="menu05"><a href="05.html">05</a></li>
                        <li id="menu06"><a href="06.html">06</a></li>
                        <li id="menu07"><a href="07.html">07</a></li>
                        <li id="menu08"><a href="08.html">08</a></li>
                        <li id="menu09"><a href="09.html">09</a></li>
                        <li id="menu10"><a href="10.html">10</a></li>
                        <li id="menu11"><a href="11.html">11</a></li>
                        <li id="menu12"><a href="12.html">12</a></li>
                        <li id="menu13"><a href="13.html">13</a></li>
                    </ul>
                </nav>
            </div>
        </header>
        <h1>04: AJAX Requesting a JSON File</h1>
        <br>
        <br>
        <h3>Display JSON data from an external file:</h3>
        <!--        <button type="button" onclick="stringify()">Go Go Gadget AJAX!</button>-->
        <input type="range" id="sliderRange" onInput="jsonString('/Cotton-Alex.github/phoenixborn.json', 'parseData', true)" value="0" max="14">
        <br>
        <br>
        <div id="parseData"></div>
        <br>
        <br>
        <br>
        <br>
        <!--        <div id="stringifyExplain"></div>
                <div id="stringifyData"></div>-->
        <br>
        <br>

        <div id="rawJSON">
            <h2>AJAX can serialize a JSON file and that can be displayed as a string.</h2>
            <button type="button" onclick="jsonString('/Cotton-Alex.github/phoenixborn.json', 'stringData', true)">Stringify</button>
        </div>
        <div id="stringData"></div>
        
        <script>
            function jsonString(url, divId, isJSON) {
                var i = document.getElementById("sliderRange").value;
                var xmlhttp = new XMLHttpRequest();
                xmlhttp.onreadystatechange =
                        function () {
                            if (xmlhttp.readyState === 4 && xmlhttp.status === 200)
                                parseDataFunc(xmlhttp.responseText, divId, isJSON, i);

                        };
                xmlhttp.open("GET", url, true);
                xmlhttp.send();
            }

            function parseDataFunc(response, divId, isJSON, i) {
                var responseText = (isJSON) ? JSON.parse(response) : response;
                document.getElementById(divId).innerHTML =
                        "<ul id='pbAJAX'><li><div><img class='pbPicAJAX' src='" + responseText[i].card + "' height='250'>"
                        + "<div class='pbInfoAJAX'> Name: " + responseText[i].name + "<br>"
                        + responseText[i].from + "<br>\n\
                Battlefield: " + responseText[i].stats.battlefield + "<br>\n\
                Life: " + responseText[i].stats.life + "<br>\n\
                Spellboard: " + responseText[i].stats.spellboard + "<br>\n\
                Ability: " + responseText[i].stats.ability + "</div></div></li>\n\
                \n\
                <li><div><img class='pbPicAJAX' src='" + responseText[i].unique.card + "' height='250'>"
                + "<div class='pbInfoAJAX'>Unique Card: " + responseText[i].unique.name + "<br>"
                + "Type: " + responseText[i].unique.type + "<br>"
                + "Placement: " + responseText[i].unique.location + "<br></div></div></li></ul><br><br><br>";
            }
        </script>
    </body>
</html>
