<!DOCTYPE html>
<html lang="en">
    <head>

        <meta charset="utf-8">
        <title>cit261</title>

        <!-- Mobile Specific Metas -->
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <!-- FONT -->
        <link href="//fonts.googleapis.com/css?family=Raleway:400,300,600" rel="stylesheet" type="text/css">

        <!-- CSS -->
        <link rel="stylesheet" href="css.css">

    </head>
    <body>
        <header>
            <div>
                <nav>
                    <ul>
                        <li><a href="index.html">:: home ::</a></li>
                        <li><a href="01.html">01</a></li>
                        <li><a href="02.html">02</a></li>
                        <li><a href="03.html">03</a></li>
                        <li><a href="04.html">04</a></li>
                        <li><a href="05.html">05</a></li>
                        <li><a href="06.html">06</a></li>
                        <li><a href="07.html">07</a></li>
                        <li><a href="08.html">08</a></li>
                        <li><a href="09.html">09</a></li>
                        <li><a href="10.html">10</a></li>
                        <li><a href="11.html">11</a></li>
                        <li><a href="12.html">12</a></li>
                        <li><a href="13.html">13</a></li>
                    </ul>
                </nav>
            </div>
        </header>
        <h1>04: AJAX Requesting a JSON File</h1>
        <br>
        <br>
        <h3>Display JSON data from an external file:</h3>
        <button type="button" onclick="loadDoc('/phoenixborn.json', stringify)">Go Go Gadget JSON!</button>
        <br>
        <br>
        <div id="parseData"></div>
        <br>
        <br>
        <br>
        <br>
        <div id="stringifyExplain"></div>
        <div id="stringifyData"></div>
        <br>
        <br>

<div id="demo">
<h2>The XMLHttpRequest Object</h2>
<button type="button" onclick="loadDoc()">Go Go Gadget AJAX!</button>
</div>

<script>
function loadDoc() {
  var xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
      document.getElementById("demo").innerHTML =
      this.responseText;
    }
  };
  xhttp.open("GET", "phoenixborn.json", true);
  xhttp.send();
}
</script>







        <script>
            var phoenixCard;
            function loadJSON(url, divId, isJSON) {
                var xmlhttp = new XMLHttpRequest();
                xmlhttp.onreadystatechange =
                        function () {
                            if (xmlhttp.readyState === 4 && XMLHttp.status === 200)
                                responseWrangler(xmlhttp.responseText, divId, isJSON);
                        };

                xmlhttp.open("GET", url, true);
                xmlhttp.send();

    }

            function responseWrangler(response, divId, isJSON) {
                var responseText = (isJSON) ? JSON.parse(response) : response;
                document.getElementById( divId ).innerHTML = (isJSON) ? responseText.JSONKey : responseText;
            }

            function stringify() {
                var stringifyExplain = ("<h3>Stringify was used to convert the above JSON data to this string:</h3>");
                var i = document.getElementById("sliderRange").value;

                var string = JSON.stringify(phoenixCard);
                var object = JSON.parse(string);
                document.getElementById('stringifyExplain').innerHTML = stringifyExplain;
                document.getElementById('stringifyData').innerHTML = string;
                document.getElementById('parseData').innerHTML =
                        "<div><img class='pbPic' src='" + phoenixCard[i].card + "' height='250'>" +
                        "<div class='pbInfo'>Name: " + phoenixCard[i].name + "<br>"
                        + phoenixCard[i].from + "<br>\n\
                Battlefield: " + phoenixCard[i].stats.battlefield + "<br>\n\
                Life: " + phoenixCard[i].stats.life + "<br>\n\
                Spellboard: " + phoenixCard[i].stats.spellboard + "<br>\n\
                Ability: " + phoenixCard[i].stats.ability + '</div></div><br><br><br>';
            }
        </script>




        <script>
            var movie;
            function getFileFromServer(url, divId) {
                var xmlhttp = new XMLHttpRequest();
                xmlhttp.onreadystatechange = function () {
                    if (xmlhttp.readyState === 4 && xmlhttp.status === 200)
                        doSomethingWithTheResponse(xmlhttp.responseText);
                };

                xmlhttp.open("GET", url, true);
                xmlhttp.send();

            }

            function doSomethingWithTheResponse(response) {
                var responseText = JSON.parse(response);
                movie = responseText.data.movies[0];
                document.getElementById('movieName').innerHTML = movie.title;
            }
        </script>
    </body>
</html>
